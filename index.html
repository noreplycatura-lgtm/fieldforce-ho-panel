<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HO Admin Panel - Field Force</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <i class="fas fa-building"></i>
                <h1>HO Admin Panel</h1>
                <p>Field Force Management System</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label>User Code</label>
                    <input type="text" id="loginUserCode" placeholder="Enter User Code" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter Password" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
            <div id="loginError" class="error-msg hidden"></div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="app-container hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-building"></i>
                <span>HO Panel</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="employees">
                    <i class="fas fa-users"></i>
                    <span>Employees</span>
                </a>
                <a href="#" class="nav-item" data-page="customers">
                    <i class="fas fa-user-md"></i>
                    <span>Customers</span>
                </a>
                <a href="#" class="nav-item" data-page="stockists">
                    <i class="fas fa-warehouse"></i>
                    <span>Stockists</span>
                </a>
                <a href="#" class="nav-item" data-page="products">
                    <i class="fas fa-pills"></i>
                    <span>Products</span>
                </a>
                <a href="#" class="nav-item" data-page="areas">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Areas</span>
                </a>
                <a href="#" class="nav-item" data-page="expenses">
                    <i class="fas fa-receipt"></i>
                    <span>Expenses</span>
                </a>
                <a href="#" class="nav-item" data-page="approvals">
                    <i class="fas fa-check-circle"></i>
                    <span>Approvals</span>
                    <span id="approvalBadge" class="badge hidden">0</span>
                </a>
                <a href="#" class="nav-item" data-page="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </a>
                <a href="#" class="nav-item" data-page="announcements">
                    <i class="fas fa-bullhorn"></i>
                    <span>Announcements</span>
                </a>
                <a href="#" class="nav-item" data-page="hierarchy">
                    <i class="fas fa-sitemap"></i>
                    <span>Hierarchy</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button id="logoutBtn" class="btn btn-outline btn-sm">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button id="sidebarToggle" class="btn-icon">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="pageTitle">Dashboard</h2>
                </div>
                <div class="header-right">
                    <span id="currentDate"></span>
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <span id="userName">Admin</span>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <!-- Dashboard Page -->
                <div id="dashboardPage" class="page active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon bg-blue"><i class="fas fa-users"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="statActiveEmployees">0</span>
                                <span class="stat-label">Active Employees</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon bg-green"><i class="fas fa-check-circle"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="statTodayPunches">0</span>
                                <span class="stat-label">Today Punches</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon bg-purple"><i class="fas fa-phone"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="statTodayVisits">0</span>
                                <span class="stat-label">Today Visits</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon bg-orange"><i class="fas fa-rupee-sign"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="statTodayPOB">₹0</span>
                                <span class="stat-label">Today POB</span>
                            </div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-icon bg-yellow"><i class="fas fa-user-plus"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="statPendingCustomers">0</span>
                                <span class="stat-label">Pending Customers</span>
                            </div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-icon bg-red"><i class="fas fa-file-invoice"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="statPendingExpenses">0</span>
                                <span class="stat-label">Pending Expenses</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3>Recent Visits</h3>
                                <a href="#" class="link" data-page="reports">View All</a>
                            </div>
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Employee</th>
                                            <th>Customer</th>
                                            <th>Time</th>
                                            <th>POB</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentVisitsTable">
                                        <tr><td colspan="4" class="text-center">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3>Quick Actions</h3>
                            </div>
                            <div class="card-body">
                                <div class="quick-actions">
                                    <button class="action-btn" onclick="showPage('employees'); showEmployeeModal()">
                                        <i class="fas fa-user-plus"></i>
                                        <span>Add Employee</span>
                                    </button>
                                    <button class="action-btn" onclick="showPage('approvals')">
                                        <i class="fas fa-check-double"></i>
                                        <span>Approvals</span>
                                    </button>
                                    <button class="action-btn" onclick="showPage('announcements'); showAnnouncementModal()">
                                        <i class="fas fa-bullhorn"></i>
                                        <span>New Announcement</span>
                                    </button>
                                    <button class="action-btn" onclick="createBackup()">
                                        <i class="fas fa-download"></i>
                                        <span>Backup Data</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Employees Page -->
                <div id="employeesPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <input type="text" id="employeeSearch" class="search-input" placeholder="Search employees...">
                            <select id="employeeStatusFilter" class="select-input">
                                <option value="all">All Status</option>
                                <option value="Active">Active</option>
                                <option value="Blocked">Blocked</option>
                                <option value="Deleted">Deleted</option>
                            </select>
                            <button class="btn btn-primary" onclick="showEmployeeModal()">
                                <i class="fas fa-plus"></i> Add Employee
                            </button>
                            <button class="btn btn-secondary" onclick="showBulkUploadModal('employee')">
                                <i class="fas fa-upload"></i> Bulk Upload
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="employeesTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Mobile</th>
                                        <th>Designation</th>
                                        <th>Reporting To</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="employeesTableBody">
                                    <tr><td colspan="7" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Customers Page -->
                <div id="customersPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <input type="text" id="customerSearch" class="search-input" placeholder="Search customers...">
                            <select id="customerStatusFilter" class="select-input">
                                <option value="all">All Status</option>
                                <option value="Approved">Approved</option>
                                <option value="Pending">Pending</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                            <select id="customerAreaFilter" class="select-input">
                                <option value="all">All Areas</option>
                            </select>
                            <button class="btn btn-secondary" onclick="showBulkTransferModal()">
                                <i class="fas fa-exchange-alt"></i> Bulk Transfer
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="customersTable">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllCustomers"></th>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Specialty</th>
                                        <th>Area</th>
                                        <th>Mobile</th>
                                        <th>Created By</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTableBody">
                                    <tr><td colspan="9" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Stockists Page -->
                <div id="stockistsPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <input type="text" id="stockistSearch" class="search-input" placeholder="Search stockists...">
                            <button class="btn btn-primary" onclick="showStockistModal()">
                                <i class="fas fa-plus"></i> Add Stockist
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="stockistsTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Code</th>
                                        <th>City</th>
                                        <th>Mobile</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="stockistsTableBody">
                                    <tr><td colspan="7" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Products Page -->
                <div id="productsPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <input type="text" id="productSearch" class="search-input" placeholder="Search products...">
                            <button class="btn btn-primary" onclick="showProductModal()">
                                <i class="fas fa-plus"></i> Add Product
                            </button>
                            <button class="btn btn-secondary" onclick="showBulkUploadModal('product')">
                                <i class="fas fa-upload"></i> Bulk Upload
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="productsTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Code</th>
                                        <th>Category</th>
                                        <th>MRP</th>
                                        <th>PTS</th>
                                        <th>PTR</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody">
                                    <tr><td colspan="9" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Areas Page -->
                <div id="areasPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <input type="text" id="areaSearch" class="search-input" placeholder="Search areas...">
                            <button class="btn btn-primary" onclick="showAreaModal()">
                                <i class="fas fa-plus"></i> Add Area
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="areasTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Area Name</th>
                                        <th>City</th>
                                        <th>State</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="areasTableBody">
                                    <tr><td colspan="6" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Expenses Page -->
                <div id="expensesPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <select id="expenseMonthFilter" class="select-input">
                                <option value="1">January</option>
                                <option value="2">February</option>
                                <option value="3">March</option>
                                <option value="4">April</option>
                                <option value="5">May</option>
                                <option value="6">June</option>
                                <option value="7">July</option>
                                <option value="8">August</option>
                                <option value="9">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                            <select id="expenseYearFilter" class="select-input">
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                            </select>
                            <select id="expenseStatusFilter" class="select-input">
                                <option value="all">All Status</option>
                                <option value="Submitted">Submitted</option>
                                <option value="Approved">Approved</option>
                                <option value="Rejected">Rejected</option>
                                <option value="Countered">Countered</option>
                            </select>
                            <button class="btn btn-secondary" onclick="loadExpenses()">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="expensesTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Employee</th>
                                        <th>Month/Year</th>
                                        <th>Daily Total</th>
                                        <th>Monthly Total</th>
                                        <th>Grand Total</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="expensesTableBody">
                                    <tr><td colspan="8" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Approvals Page -->
                <div id="approvalsPage" class="page">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="pendingCustomers">Pending Customers</button>
                        <button class="tab-btn" data-tab="pendingExpenses">Pending Expenses</button>
                        <button class="tab-btn" data-tab="masterRequests">Master Requests</button>
                    </div>
                    
                    <div id="pendingCustomersTab" class="tab-content active">
                        <div class="card">
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Customer Name</th>
                                            <th>Specialty</th>
                                            <th>Area</th>
                                            <th>Mobile</th>
                                            <th>Added By</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pendingCustomersTableBody">
                                        <tr><td colspan="7" class="text-center">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="pendingExpensesTab" class="tab-content">
                        <div class="card">
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Employee</th>
                                            <th>Designation</th>
                                            <th>Month/Year</th>
                                            <th>Total Amount</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pendingExpensesTableBody">
                                        <tr><td colspan="5" class="text-center">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="masterRequestsTab" class="tab-content">
                        <div class="card">
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Request Type</th>
                                            <th>Customer</th>
                                            <th>Field</th>
                                            <th>Old Value</th>
                                            <th>New Value</th>
                                            <th>Requested By</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="masterRequestsTableBody">
                                        <tr><td colspan="7" class="text-center">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div id="reportsPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <input type="date" id="reportStartDate" class="date-input">
                            <input type="date" id="reportEndDate" class="date-input">
                            <select id="reportType" class="select-input">
                                <option value="employee_performance">Employee Performance</option>
                                <option value="daily_summary">Daily Summary</option>
                                <option value="area_wise">Area Wise</option>
                                <option value="product_wise">Product Wise</option>
                                <option value="stockist_wise">Stockist Wise</option>
                            </select>
                            <button class="btn btn-primary" onclick="generateReport()">
                                <i class="fas fa-chart-bar"></i> Generate
                            </button>
                            <button class="btn btn-secondary" onclick="exportReport('excel')">
                                <i class="fas fa-file-excel"></i> Excel
                            </button>
                            <button class="btn btn-secondary" onclick="exportReport('pdf')">
                                <i class="fas fa-file-pdf"></i> PDF
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div id="reportContent">
                                <p class="text-center text-muted">Select date range and report type, then click Generate</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Announcements Page -->
                <div id="announcementsPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <button class="btn btn-primary" onclick="showAnnouncementModal()">
                                <i class="fas fa-plus"></i> New Announcement
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <table class="table" id="announcementsTable">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Priority</th>
                                        <th>Start Date</th>
                                        <th>End Date</th>
                                        <th>Created At</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="announcementsTableBody">
                                    <tr><td colspan="6" class="text-center">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Hierarchy Page -->
                <div id="hierarchyPage" class="page">
                    <div class="page-header">
                        <div class="page-actions">
                            <button class="btn btn-secondary" onclick="loadHierarchy()">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="hierarchy-container">
                        <div class="card">
                            <div class="card-header">
                                <h3>Employee Hierarchy</h3>
                            </div>
                            <div class="card-body">
                                <table class="table" id="hierarchyTable">
                                    <thead>
                                        <tr>
                                            <th>Employee</th>
                                            <th>Designation</th>
                                            <th>Reporting To</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="hierarchyTableBody">
                                        <tr><td colspan="4" class="text-center">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3>Area Mapping</h3>
                            </div>
                            <div class="card-body">
                                <table class="table" id="areaMappingTable">
                                    <thead>
                                        <tr>
                                            <th>Employee</th>
                                            <th>Mapped Areas</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="areaMappingTableBody">
                                        <tr><td colspan="3" class="text-center">Loading...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settingsPage" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h3>System Settings</h3>
                        </div>
                        <div class="card-body">
                            <form id="settingsForm">
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label>Default Radius (meters)</label>
                                        <input type="number" id="setting_default_radius" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>Max Radius (meters)</label>
                                        <input type="number" id="setting_max_radius" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>HQ Allowance (₹)</label>
                                        <input type="number" id="setting_hq_allowance" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>Ex-HQ Allowance (₹)</label>
                                        <input type="number" id="setting_ex_hq_allowance" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>Outstation Allowance (₹)</label>
                                        <input type="number" id="setting_outstation_allowance" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>KM Rate (₹)</label>
                                        <input type="number" id="setting_km_rate" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>Mobile Allowance (₹)</label>
                                        <input type="number" id="setting_mobile_allowance" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label>Photo Max Size (KB)</label>
                                        <input type="number" id="setting_photo_max_size" class="form-input">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Save Settings
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div id="modalContainer" class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Modal</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden">
        <span id="toastMessage"></span>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
